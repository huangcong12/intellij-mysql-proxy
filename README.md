![mysql_proxy_原理架构图](https://github.com/huangcong12/intellij-mysql-proxy/assets/2867782/d4d0358a-842a-4feb-9466-5193e43f9eb2)## intellij-mysql-proxy
Tool for Monitoring Code Execution CRUD.

![Uploading mysql_p<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="531px" height="301px" viewBox="-0.5 -0.5 531 301" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-08-23T07:14:52.550Z&quot; agent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/21.6.8 Chrome/114.0.5735.289 Electron/25.5.0 Safari/537.36&quot; etag=&quot;dftWpGHK5mWlD-7wFDGz&quot; version=&quot;21.6.8&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;第 1 页&quot; id=&quot;arNRnqveYhZFso71kiaz&quot;&gt;5VhNc5swEP01HNNBCOPkGDtJc0jaZNyZNkcF1qBGICKEgf76LkYYY3A+Zhxnpj1Zelqtdt+unmVbdB6XXxVLo1sZgLAcOygtemE5DiFkih81UhnEpnaDhIoHBuuABf8DraFBcx5A1jPUUgrN0z7oyyQBX/cwppQs+mZLKfqnpiyEAbDwmRiiP3mgowY9daYdfg08jNqTiXfWrMSsNTaZZBELZLEF0UuLzpWUuhnF5RxEzV7LS7Pvas/qJjAFiX7LhlXw4/lkde0uqm8qur8jVSGfTqiJTVdtwhBg/mYqlY5kKBMmLjt0pmSeBFB7tXHW2dxImSJIEPwNWlemmCzXEqFIx8KsQsn1r63xQ+3qy8TMLkrjeT2pzKSJsw5ub/oGymSufHgh57aNmApBv2DnbIqE7Q0yBq0q3KdAMM1X/TiYabNwY9dVAgemGO8ojPG7YiI3J1mOJzDcWcBXOAz1mpQGylKW9KroPed1W80emf8Urut14kshlUXP64MTrjkTjQNj2bp8QPbQ5DxNBfcxT5m0h2AazTn9sxHuRbTTTl2z1NUuIq5hkbJ1fQqUjH5jmJxBaShfLvOwLGbDmbltRm+ciZkX3eUlrsGirYvr2R9USGdQyNtqcX8zIArlIa2HfiU4Mqbo63Q9NtzePG6ATbm/5xrdgMGz5iaSyWE4dqc7JLtDkr0Rjk8/imPyP8rY5I0yRvYU8zg6Nhm0/5jCfLJoELvf0C4ZUQ1yTNXw/kHVON0h2f5s1XBHvmOPLyOHfNm89WnjferTZvi2Mc1t3ylZVnubHClhQoCQoWIxMpeC4hgSqN21u27htduw5CW0PzsOpCa7b5BRNXGOqSZkKCczWEoF68egBuRsVIezgseC1YLwGo0Ztpw2NDr0MDzuvjJGaJyM0Ujoh/E4HfB4vqzb7FA0Hp41Oh1hjY6x5r6fNZx2v1/Xa1t/A9DLvw==&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 160 70 L 393.63 70" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 398.88 70 L 391.88 73.5 L 393.63 70 L 391.88 66.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="20" y="40" width="140" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 70px; margin-left: 21px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div><span style="background-color: initial;">Your Application</span></div></div></div></div></foreignObject><text x="90" y="74" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Your Application</text></switch></g><path d="M 400 45 C 400 36.72 413.43 30 430 30 C 437.96 30 445.59 31.58 451.21 34.39 C 456.84 37.21 460 41.02 460 45 L 460 95 C 460 103.28 446.57 110 430 110 C 413.43 110 400 103.28 400 95 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 460 45 C 460 53.28 446.57 60 430 60 C 413.43 60 400 53.28 400 45" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 83px; margin-left: 401px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">MySQL</div></div></div></foreignObject><text x="430" y="86" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">MySQL</text></switch></g><path d="M 140 230 L 223.63 230" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 228.88 230 L 221.88 233.5 L 223.63 230 L 221.88 226.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="30" y="200" width="110" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 230px; margin-left: 31px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">Your Application</div></div></div></foreignObject><text x="85" y="234" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Your Application</text></switch></g><path d="M 410 205 C 410 196.72 423.43 190 440 190 C 447.96 190 455.59 191.58 461.21 194.39 C 466.84 197.21 470 201.02 470 205 L 470 255 C 470 263.28 456.57 270 440 270 C 423.43 270 410 263.28 410 255 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 470 205 C 470 213.28 456.57 220 440 220 C 423.43 220 410 213.28 410 205" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 243px; margin-left: 411px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">MySQL</div></div></div></foreignObject><text x="440" y="246" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">MySQL</text></switch></g><path d="M 330 230 L 403.63 230" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 408.88 230 L 401.88 233.5 L 403.63 230 L 401.88 226.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 220 260 L 240 200 L 340 200 L 320 260 Z" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 230px; margin-left: 221px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">MySQL Proxy</div></div></div></foreignObject><text x="280" y="234" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">MySQL Proxy</text></switch></g><path d="M 0 23 L 0 0 L 520 0 L 520 23" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><path d="M 0 23 L 0 130 L 520 130 L 520 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 23 L 520 23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 518px; height: 1px; padding-top: 12px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">Before integration</div></div></div></foreignObject><text x="260" y="15" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Before integration</text></switch></g><path d="M 0 183 L 0 160 L 530 160 L 530 183" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 183 L 0 300 L 530 300 L 530 183" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 183 L 530 183" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 528px; height: 1px; padding-top: 172px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; overflow-wrap: normal;">After integration</div></div></div></foreignObject><text x="265" y="175" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">After integration</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>roxy_原理架构图.svg…]()


During the process of API development, whether it's troubleshooting or debugging, it's crucial to know which SQL statements have just been executed. While some modern frameworks make this information easily accessible, dealing with older frameworks can be quite cumbersome. This tool was born to address the challenge of quickly inspecting executed SQL statements within legacy frameworks. With its assistance, every SQL statement within older frameworks can be effortlessly revealed.


## Suitable Frameworks:
PHP:
- Wordpress
- CodeIgniter (CI)
- Yii

Go:
- Frameworks using GORM (Tested with go-admin)

Java (To be tested):

Python:
- Django

## Not well-suited for frameworks using SQL preprocessing:
PHP (Utilizes PDO for prepared statement execution; complete packet parsing not supported):
- Laravel
- ThinkPHP 6 (tp6)

## Initial Setup Steps:
- Check the bottom toolbar of your editor to see if there is an icon resembling a fish head (it should be located next to Git, TODO, Problems, and Terminal). Click on it to open the plugin's page.
- Click on the "Modify Run Configuration" button in the left button group and configure the remote MySQL server information in the popup: Remote MySQL Server IP Address, Remote MySQL Server Port, and the local listening port: Proxy Listener Port.
- Return to the left button group and click on "Start 'Mysql Proxy Server'" to initiate the proxy service. If you see a green dot next to the fish head icon, it indicates successful startup.
- Now, go back to your project's code and modify the database connection configuration (usually found in the Config folder's Database configuration file) to use the local IP and the "Proxy Listener Port" you configured earlier.
- Restart your project (if necessary) and execute your MySQL queries to check if SQL logs are being monitored correctly. With this, the configuration process is complete. If you still cannot see clear SQL logs, please refer to the FAQ below.

## Usage Recommendations:
- After the initial installation, you'll need to configure the remote MySQL's IP, port, and the local proxy listening port. Once configured, please check the "Start Proxy Service with Editor" option. This way, you won't need to start it manually in the future. For the initial installation, you'll need to manually click "Start 'Mysql Proxy Server'".
- If you don't need to view SQL logs temporarily, click the "Stop Recording SQL" switch. When needed, you can reopen the logging.
- If the logged entries exceed 100,000, click the "Clear All Sql Log" button to restart logging from 1 and free up system resources.
- If you wish to copy SQL, besides using Ctrl + C to copy the entire line, you can also right-click and choose "Copy SQL." If there are SQL statements you'd rather not see, you can right-click to delete them or add them to the filter table. Once added to the filter table, they will no longer appear unless you remove them from the filter table.

## FAQ:
### Q: I followed the documentation, configured everything, and started the proxy service, but I can't see the SQL logs.
A: Possible reasons:
- 1.The MySQL connection in your code might not have been adjusted to the proxy's address. Please double-check and try stopping the proxy service to see if your code can connect to the database.
- 2.It's possible that your framework has disabled the logging feature. Check the third button in the left button group to see if it reads "Recording Synchronized SQL In Progress" and has a small green dot.
- 3.If both of the above points are correctly configured and you still encounter issues, please provide us with information about your database version, code framework, etc. If we identify the problem, we will address it in the next version.

### Q: My SQL logs appear as garbled text. How can I resolve this?
A: The database packets are encrypted. To resolve this, add "useSSL=false" to your MySQL configuration, like this: "jdbc:mysql://localhost:3309?useSSL=false".

### Q: What versions of MySQL are supported?
A: We have tested with MySQL 5.7 and MySQL 8.0. It should support all databases using the MySQL protocol, such as MariaDB and TiDB.

### Q: Can I use my own custom framework with this?
A: You can give it a try. If you find that SQL logs are garbled, add the parameter "useSSL=false" to your configuration, like this: "jdbc:mysql://localhost:3309?useSSL=false". If it still doesn't work, it might not be supported. You can provide us with your process and results, and we will work on optimizations in the next version.
